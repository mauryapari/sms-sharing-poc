<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    Works on Android and Ios devices without any error message <br>
    <a href="sms:+911234567890" id="smsLinkAndroid"> CALL US</a> <br>
    <a href="sms:+911234567890" id="smsLinkIos"> CALL US</a><br>
------------------------------------------------------------------------------------------------------------- <br>
    Does not work and shows error message<br>
    <a href="sms:+911234567890" id="smsLinkWindow"> CALL US</a><br>

-------------------------------------------------------------------------------------------------------------<br>
    Works and still shows error message<br>
    <a href="sms:+911234567890" id="smsLinkMac"> CALL US </a><br>

    <script>
        console.log('ran')
        // window.navigator.registerProtocolHandler(
        //     "sms",
        //     "http://127.0.0.1:5500/index.html?sms=%s",
        //     "Sms Handler"
        // )

        // let element1 = document.getElementById('smsLinkAll');
        // element1.addEventListener('click', function(event) {
        //     console.log(this.href);
        //     if ((!navigator.canShare || !navigator.canShare({url: this.href})) && !navigator.contacts && (!(/iPad|iPhone|iPod/.test(navigator.userAgent)) || navigator.platform.toUpperCase().indexOf('MAC') >=0)) {
        //         alert('Device does not have message sending capabilities!');
        //     }
        // });

        let element2 = document.getElementById('smsLinkWindow');
        element2.addEventListener('click', function(event) {
            console.log(this.href);
            if ((!navigator.canShare || !navigator.canShare({url: this.href})) && !navigator.contacts) {
                alert('Device does not have message sending capabilities!');
            }
        });

        // navigator Contacts does not work but is required to check for windows browser
        let element3 = document.getElementById('smsLinkMac');
        element3.addEventListener('click', function(event) {
            console.log(this.href);
            if ((!navigator.canShare || !navigator.canShare({url: this.href})) && !navigator.contacts && (!(/iPad|iPhone|iPod/.test(navigator.userAgent)) || navigator.platform.toUpperCase().indexOf('MAC') >=0)) {
                alert('Device does not have message sending capabilities!');
            }
        });


    // const props = ["name", "email", "tel", "address", "icon"];
    // const opts = { multiple: true };


    // const handleResults = (contacts) => {
    //     console.log('data is', contacts);
    // } 

    // async function getContacts() {
    //     try {
    //     const contacts = await navigator.contacts.select(props, opts);
    //         handleResults(contacts);
    //         console.log('==>',contacts)
    //     } catch (ex) {
    //     // Handle any errors here.
    //     }
    // }

    // getContacts()
    </script>
</body>
</html>